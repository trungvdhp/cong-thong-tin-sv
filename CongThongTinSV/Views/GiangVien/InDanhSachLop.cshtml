@using Kendo.Mvc.UI;
@{
    ViewBag.Title = "InDanhSachLop";
}


@*@Html.Label("NamHoc", "Năm học:")*@
@(Html.Kendo().DropDownList()
    .Name("NamHoc")
    //.Placeholder("Chọn năm học")
    .OptionLabel("Chọn năm học")
    .DataTextField("Text")
    .DataValueField("Value")
    //.SelectedIndex(0)
    .DataSource(source =>
    {
        source.Read(read =>
        {
            read.Action("GetNamHoc", "JSON");
        }).ServerFiltering(true);
    })
        //.Events(e =>
        //{
        //    e.Select("reloadDotHoc");
        //})
)
<script type="text/javascript">
    function reloadDotHoc() {
        $("#HocKy").data("kendoDropDownList").dataSource.read();
        $("#HocKy").data("kendoDropDownList").refresh();
    }
    function filterHocKy() {
        return {
            NamHoc: $("#NamHoc").val()
        }
    }
    function filterDotHoc() {
        return {
            NamHoc: $("#NamHoc").val(),
            HocKy: $("#HocKy").val()
        }
    }
</script>
@*@Html.Label("HocKy", "Học kỳ:")*@
@(Html.Kendo().DropDownList()
    .Name("HocKy")
    .OptionLabel("Chọn học kỳ")
    .DataTextField("Text")
    .DataValueField("Value")
    .DataSource(source =>
    {
        source.Read(read =>
        {
            read.Action("GetHocKy", "JSON")
                .Data("filterHocKy");
        }).ServerFiltering(true);
    })
    .Enable(false)
    .AutoBind(false)
        .CascadeFrom("NamHoc")
)
@*@Html.Label("DotHoc", "Đợt học:")*@
@(Html.Kendo().DropDownList()
    .Name("DotHoc")
    .OptionLabel("Chọn đợt học")
    .DataTextField("Text")
    .DataValueField("Value")
    .DataSource(source =>
    {
        source.Read(read =>
        {
            read.Action("GetDotHoc", "JSON")
                .Data("filterDotHoc");
        }).ServerFiltering(true);
    })
    .Enable(false)
    .AutoBind(false)
        .CascadeFrom("HocKy")
)
@*@Html.Label("HeDT", "Hệ đào tạo:")*@
@(Html.Kendo().DropDownList()
    .Name("HeDT")
    .OptionLabel("Chọn hệ đào tạo")
    .DataTextField("Text")
    .DataValueField("Value")
        .SelectedIndex(0)
    .DataSource(source =>
    {
        source.Read(read =>
        {
            read.Action("GetHeDT", "JSON");
        }).ServerFiltering(true);
    })
    .CascadeFrom("DotHoc")
)
@*@Html.Label("Khoa", "Khoa:")*@
@(Html.Kendo().DropDownList()
    .Name("Khoa")
    .OptionLabel("Chọn khoa")
    .DataTextField("Text")
    .DataValueField("Value")
        .SelectedIndex(0)
    .DataSource(source =>
    {
        source.Read(read =>
        {
            read.Action("GetKhoa", "JSON");
        }).ServerFiltering(true);
    })
    .CascadeFrom("HeDT")
)
@*@Html.Label("KhoaHoc", "Khóa:")*@
@(Html.Kendo().DropDownList()
    .Name("KhoaHoc")
    .OptionLabel("Chọn khóa học")
    .DataTextField("Text")
    .DataValueField("Value")
        .SelectedIndex(0)
    .DataSource(source =>
    {
        source.Read(read =>
        {
            read.Action("GetKhoaHoc", "JSON");
        }).ServerFiltering(true);
    })
    .CascadeFrom("Khoa")
)
<script type="text/javascript">
    function filterLopTC() {
        return {
            Ky_dang_ky: $("#DotHoc").val(),
            ID_khoa: $("#Khoa").val(),
            ID_he: $("#HeDT").val(),
            Khoa_hoc: $("#KhoaHoc").val(),
        }
    }
    function reloadLopTC() {

    }
</script>
@*@Html.Label("LopTC", "Danh sách lớp học phần:")*@
@(Html.Kendo().DropDownList()
    .Name("LopTC")
    .OptionLabel("Chọn lớp học phần")
    .DataTextField("Text")
    .DataValueField("Value")
        //.SelectedIndex(0)
    .DataSource(source =>
    {
        source.Read(read =>
        {
            read.Action("GetLopTC", "JSON")
                .Data("filterLopTC");
        }).ServerFiltering(true);
    })
    .Enable(false)
    .AutoBind(false)
        .CascadeFrom("KhoaHoc")
)